<!DOCTYPE html>
<html lang="es">

    <head>
        
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-59Y3NZR5TN"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-59Y3NZR5TN');
        </script>

        <meta charset="utf-8">
        <meta name="description" itemprop="description" content="Tabla de Personajes de One Piece Treasure Cruise">
        <meta name="author" content="Solaris, Zeenigami, and Mondfischer">
        <meta name="keywords" content="OPTC, One Piece Treasure Cruise, Base de datos, Calculadora, Guías, Ayuda, Tutoriales">
        <meta name="viewport" content="width=device-width,initial-scale=1"/>
        <title>Tabla de Personajes - One Piece Treasure Cruise</title>

        <link href='//fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
        <link rel="search" href="//optc.github.io/characters/opensearch.xml"
            type="application/opensearchdescription+xml" title="OPTC Character Table">

        <link rel="stylesheet" type="text/css" href="../common/libs/css/animate.css" />
        <!--<link rel="stylesheet" type="text/css" href="../common/libs/css/font-awesome.min.css" />-->
        <link rel="stylesheet" type="text/css" href="../common/libs/css/fontawesome/all.css" />
        <!--<script src="https://kit.fontawesome.com/ef0695d0bc.js" crossorigin="anonymous"></script>-->
        <!-- link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/js/all.js" -->
        <!-- link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/js/v4-shims.js" -->
        <link rel="stylesheet" type="text/css" href="../common/libs/css/datatables.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/angular-chart.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/ion.rangeSlider.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/ngDialog.min.css" />
        <link rel="stylesheet" type="text/css" href="../common/libs/css/ngDialog-theme-default.min.css" />

        <link rel="stylesheet" type="text/css" href="../common/css/links.css" />

        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/edgy.css" ng-if="!nightMode" />

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>

        <!-- <script src="../common/libs/js/es5-shim.min.js"></script> -->
        <script src="../common/libs/js/jquery.min.js"></script>
        <script src="../common/libs/js/angular.min.js"></script>
        <script src="../common/libs/js/angular-ui-router.min.js"></script>
        <script src="../common/libs/js/jquery.noty.packaged.min.js"></script>
        <script src="../common/libs/js/ui-bootstrap-tpls.min.js"></script>

        <script src="../common/libs/js/angular-sanitize.min.js"></script>
        <script src="../common/libs/js/datatables.min.js"></script>
        <script src="../common/libs/js/typeahead.bundle.min.js"></script>
        <script src="../common/libs/js/fuse.min.js"></script>
        <script src="../common/libs/js/angular-chart.min.js"></script>
        <script src="../common/libs/js/ion.rangeSlider.min.js"></script>
        <script src="../common/libs/js/ngDialog.min.js"></script>

        <!-- Cargar datos pesados de forma asíncrona para mejorar la interactividad -->
        <div id="data-loader" style="position:fixed;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:#fff;z-index:9999;font-family:PT Sans, Arial, sans-serif;">Cargando datos, por favor espera...</div>
        <script>
        (function(){
            var dataScripts = [
                '../common/data/units.js',
                '../common/data/tags.js',
                '../common/data/aliases.js',
                '../common/data/availableClasses.js',
                '../common/data/availableTags.js',
                '../common/data/filterOptions.js',
                '../common/js/unitUtils.js',
                '../common/data/details.js',
                '../common/data/rumble.js',
                '../common/data/specials.js',
                '../common/data/captains.js',
                '../common/data/cooldowns.js',
                '../common/data/evolutions.js',
                '../common/data/flags.js',
                '../common/data/drops.js',
                '../common/data/tandems.js',
                '../common/data/families.js',
                '../common/data/matchers.js',
                '../common/data/gw.js',
                '../common/data/festival.js',
                '../common/data/version.js',
                '../common/js/utils.js'
            ];
            var appScripts = [
                'js/index.js',
                'js/states.js',
                'js/controllers.js',
                'js/directives.js',
                'js/table.js',
                'js/utils.js',
                '../common/js/directives.js',
                '../common/js/services.js'
            ];
            function loadSeq(list, i, cb){
                if(i>=list.length){ cb(); return; }
                var s = document.createElement('script'); s.src = list[i] + '?ts=' + Date.now(); s.async = false;
                s.onload = function(){ loadSeq(list, i+1, cb); };
                s.onerror = function(){ console.error('Failed to load ' + list[i]); loadSeq(list, i+1, cb); };
                document.head.appendChild(s);
            }
            loadSeq(dataScripts, 0, function(){
                try{ if(window.Utils && Utils.parseUnits) Utils.parseUnits(false); }catch(e){ console.error(e); }
                loadSeq(appScripts, 0, function(){
                    var loader = document.getElementById('data-loader'); if(loader) loader.style.display='none';
                    // Bootstrap manual de Angular solo después de cargar datos y scripts de la app
                    if(!document.querySelector('[ng-app]')){
                        angular.element(document).ready(function(){ angular.bootstrap(document, ['optc']); });
                    }
                });
            });
        })();
        </script>

        <!--<script src="js/index.js"></script>
        <script src="js/states.js"></script>
        <script src="js/controllers.js"></script>
        <script src="js/directives.js"></script>
        <script src="js/table.js"></script>
        <script src="js/utils.js"></script>

        <script src="../common/js/directives.js"></script>
        <script src="../common/js/services.js"></script>
        --><!--<script src="../common/js/error.js"></script>-->

    </head>

    <body>

        <div class="popup" ui-view="popup" ng-class="{ visible: currentState != 'main.search' }"></div>

        <div id="mainContainer" ui-view></div>
        

        <script>
        gtag('event', 'UA-73715806-1', 'auto');
        gtag('event', 'pageview', '/characters');
        </script>

        <error-report></error-report>
        <link-button exclude="characters"></link-button>

    </body>

</html>
